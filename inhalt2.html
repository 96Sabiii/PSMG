<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Harry Potter</title>
	<link href="https://fonts.googleapis.com/css?family=Antic+Slab" rel="stylesheet">
<!-- 	<link type="text/css" rel="stylesheet" href="res/css/materialize/css/materialize.css" /> -->
	<link type="text/css" rel="stylesheet" href="res/css/font-awesome/css/font-awesome.min.css">
	<link type="text/css" rel="stylesheet" href="res/css/cards.css">
	<link type="text/css" rel="stylesheet" href="res/css/app.css">
</head>

<body>
	<header>
		<img src="res/assets/img/quibbler1.png">
		<h1>The spells of Harry Potter</h1>
		<h3>This visualization considers only spells that were explicitly said aloud in the books.<br> Therefore it excludes non-verbal and imlied magic.</h3>
		<section id="myChart"></section>
	<!--	<svg id="myChart" height="1000", width="1000">
	</svg>-->
	</header>
	<main>




	</main>
</body>
<script type="text/javascript" src="res/js/lib/jquery-3.3.1.min.js"></script>
<script type="text/javascript" src="res/js/lib/events.js"></script>
<script type="text/javascript" src="res/js/lib/d3/d3.js"></script>
<script type="text/javascript" src="res/js/src/hp.js"></script>
<script type="text/javascript" src="res/js/src/hpModel.js"></script>
<script type="text/javascript" src="res/js/src/hpSpellView.js"></script>
<script type="text/javascript" src="res/js/src/hpActionsView.js"></script>
<script type="text/javascript" src="res/js/src/hpMainView.js"></script>
<script type="text/javascript" src="res/js/src/hpRelationView.js"></script>

<script>
	var d3 = d3 || {};
	hp.init();
  //hp.onCardClicked();
	//-->actionsView.createChart();
	//-->model.loadData();
	//----->createBubbleData();


	// function createChart(){
	// 	var chart = document.getElementById("myChart");
	// 	chart.style.height="800";
	// 	chart.style.width="800";
	// }

	// function loadSpellsData(){
	// 	d3.json("res/assets/data/spellsData.JSON", function(data){
	// 		createVisualizationData(data);
	// 	});
	// }
	//
	// function createVisualizationData(data){
	//
	//
	// }



//Code aus dem Netz (https://codepen.io/girliemac/pen/cDfmb?editors=0010)
	var diameter = 600;
	var svg = d3.select("#myChart").append("svg")
				.attr("width", diameter)
				.attr("height", diameter);

	var bubble = d3.pack().size([diameter,diameter]).padding(3);




	var nodes = bubble.nodes(d3.json("res/assets/data/spellsData.JSON",
			function(data){
				var obj = data.spellsData;

				var newDataSet = [];

				for(var prop in obj){
					newDataSet.push({name: obj[prop].name, size: obj[prop].totalCount});
				}
				return {children: newDataSet};
	}));


	var vis = svg.selectAll("cirlce").data(nodes);

	vis.enter().append("circle")
		 .attr('transform', function(d) { return 'translate(' + d.x + ',' + d.y + ')'; })
	 	 .attr('r', function(d) { return d.r; })
	   .attr('class', function(d) { return d.className;});
















	createChart();
	loadSpellsData();
</script>

</html>
